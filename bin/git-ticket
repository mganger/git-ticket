#!/bin/bash


CURRENT_DIR=$(pwd)
WORKING_DIR=$(mktemp -d)
cd $WORKING_DIR

case $1 in 
	init)
		git clone $CURRENT_DIR
		WORKING_DIR+="/"
		WORKING_DIR+=$(basename $CURRENT_DIR)
		cd $WORKING_DIR

		#check for (orphan) branch ticket
		if [[ $(git checkout --orphan ticket) -ne '0' ]]
		then
			echo "Init error: \'ticket\' branch already exists"
			exit 1
		fi
		echo done

		#remove files in branch
		rm -rf $(ls)

		#make ticket directory
		mkdir ticket
		touch ticket/.ticket
		git add -A
		git commit -m 'Initial ticket branch commit'
		;;

	assign)
		;;
	attach)
		;;
	checkout)
		;;
	comment)
		;;
	init)
		;;
	list)
		;;
	new)
		;;
	points)
		;;
	recent)
		;;
	show)
		;;
	state)
		;;
	sync)
		;;
	tag)
		;;
	*)
		;;
esac

cd $CURRENT_DIR
git fetch $WORKING_DIR
git pull
rm -rf $WORKING_DIR

